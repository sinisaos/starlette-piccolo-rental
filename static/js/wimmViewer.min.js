!function(a){a.fn.WimmViewer=function(b){var c=this;a(c).addClass("wimm_carousel"),b=b||{},b.miniatureWidth=b.miniatureWidth||200,b.miniatureHeight=b.miniatureHeight||150,b.miniatureSpace=b.miniatureSpace||5,b.nextText=b.nextText||'NEXT <span class="fa fa-caret-right"></span>',b.prevText=b.prevText||'<span class="fa fa-caret-left"></span> PREV',b.onImgChange="function"==typeof b.onImgChange?b.onImgChange:function(){},b.onNext="function"==typeof b.onNext?b.onNext:function(){},b.onPrev="function"==typeof b.onPrev?b.onPrev:function(){},b.viewerMaxHeight=b.viewerMaxHeight||!1,b.startIndex=b.startIndex||0,b.render3d=b.render3d||!1,b.render3d&&a(c).addClass("render3d");var d=(b.miniatureSpace+b.miniatureWidth)*a(c).find(".item").length,e=a(c).find(".carousel"),f=a(c).find(".carousel_inner"),g=a(a(c).find(".item")[b.startIndex]),h=(2*b.miniatureSpace+b.miniatureWidth)*(b.startIndex-1);h<0&&(h=0),a(f).css("left",-h+"px"),a(c).append('<div class="mainImg"></div>');var i=a(c).find(".mainImg");a(e).append('<div class="next">'+b.nextText+'</div><div class="prev">'+b.prevText+"</div>");var j=a(c).find(".next"),k=a(c).find(".prev");0==h&&a(k).hide(),a(g).addClass("active");var l=!0;a(c).find(".item").each(function(){l&&!a(this).hasClass("active")?a(this).addClass("isPrev"):a(this).hasClass("active")?l=!1:a(this).addClass("isNext")});var m=a(g).attr("data-url");a(i).append("<img src="+m+" />"),b.viewerMaxHeight&&a(i).find("img").css("maxHeight",b.viewerMaxHeight),a(c).find(".item").each(function(){a(this).click(function(){b.onImgChange();var d=a(this).attr("data-url");a(i).find("img").attr("src",d),a(c).find(".active").removeClass("active"),a(this).addClass("active");var e=!0;a(c).find(".item").removeClass("isPrev").removeClass("isNext").each(function(){e&&!a(this).hasClass("active")?a(this).addClass("isPrev"):a(this).hasClass("active")?e=!1:a(this).addClass("isNext")})}),a(this).css({width:b.miniatureWidth+"px",height:b.miniatureHeight+"px",marginRight:b.miniatureSpace+"px",marginLeft:b.miniatureSpace+"px"})}),a(f).css({marginLeft:-b.miniatureSpace+"px",marginRight:-b.miniatureSpace+"px"}),a(j).click(function(){a(f).width()+h<=d&&(h+=2*b.miniatureSpace+b.miniatureWidth,a(f).css("left",-h+"px"),b.onNext(),a(f).width()+h<=d||a(j).hide(),a(k).show())}),a(k).click(function(){h>0&&(h-=2*b.miniatureSpace+b.miniatureWidth,a(f).css("left",-h+"px"),b.onPrev(),h<=0&&a(k).hide(),a(j).show())})}}(jQuery);